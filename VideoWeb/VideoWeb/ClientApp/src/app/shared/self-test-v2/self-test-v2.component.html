<div>
  <h1 class="govuk-heading-xl mb-2">
    {{ 'self-test.testing-equipment' | translate }}
  </h1>
</div>
<div class="govuk-grid-row">
  <div *ngIf="displayConnecting" class="govuk-grid-column-full">
    <p class="govuk-body-l">{{ 'self-test.to-be-connected' | translate }}</p>
  </div>
  <div *ngIf="displayFeed" class="govuk-grid-column-full">
    <video appForcePlayVideo *ngIf="streamsActive" id="incomingStream" [srcObject]="incomingStream" width="65%" height="auto">
      {{ 'self-test.browser-not-support' | translate }}
    </video>
  </div>
</div>

<div class="govuk-grid-row">
  <div class="self-view-container">
    <div>
      <video
        *ngIf="outgoingStream?.active"
        #selfViewVideo
        [muted]="true"
        id="outgoingStream"
        [srcObject]="outgoingStream"
        width="100%"
        height="auto"
        class="selfie-view"
      >
        {{ 'self-test.browser-not-support' | translate }}
      </video>
    </div>

    <div>
      <app-mic-visualiser
        *ngIf="displayFeed && streamsActive && preferredMicrophoneStream"
        [stream]="preferredMicrophoneStream"
        [incomingStream]="preferredMicrophoneStream"
      ></app-mic-visualiser>
    </div>
  </div>
</div>

<app-select-media-devices *ngIf="displayDeviceChangeModal" (shouldClose)="hideChangeDevices()"></app-select-media-devices>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full govuk-!-margin-top-6 govuk-!-margin-bottom-6">
    <div class="govuk-button-group">
      <button
        *ngIf="showChangeDevicesButton"
        type="submit"
        class="govuk-button govuk-button--secondary"
        data-module="govuk-button"
        (click)="displayChangeDevices()"
      >
        {{ 'self-test.change-camera-mic' | translate }}
      </button>
    </div>
  </div>
</div>
