<div class="chat-input-group">
  <div
    [ngClass]="isInputInvalid ? 'govuk-form-group--error' : 'govuk-form-group govuk-!-margin-left-2 govuk-!-margin-bottom-2'"
    class="chat-input-text-button-group">
    <textarea class="govuk-textarea chat-input" required rows=2 autocomplete="off" [formControl]="newMessageBody"
      id="new-message-box" name="new-message-box" #newMessageBox type="text" (keydown.enter)="$event.preventDefault()"
      (keydown)="onKeydown($event)"></textarea>
    <button [disabled]="isSendingBlocked" (click)="sendMessage()" id="send-new-message-btn"
      class="govuk-button chat-btn" data-module="govuk-button">
      Send
    </button>
  </div>
  <div *ngIf="newMessageBody.pristine || !isInputInvalid"
    class="govuk-hint govuk-character-count__message govuk-!-margin-left-2 length-hint">
    Character count {{currentInputLength}} (maximum allowed {{maxInputLength}})
  </div>
  <div id="input-errors" *ngIf="isInputInvalid"
    class="govuk-hint govuk-form-group--error length-hint govuk-!-padding-top-2 govuk-!-margin-bottom-0">
    <span class="govuk-error-message length-hint govuk-!-margin-bottom-0">Character count
      {{currentInputLength}} (maximum
      allowed {{maxInputLength}}) Unable to send message</span>
  </div>
</div>
