<div class="panel-container" [ngClass]="{ 'vh-twidth': !expandPanel }">
    <div class="govuk-grid-row govuk-!-margin-bottom-1">
        <div class="govuk-grid-column-full govuk-!-margin-top-2">
            <span *ngIf="expandPanel; else collapsePanel">
                <span class="govuk-!-margin-bottom-3 vh-expand">
                    <img src="/assets/images/collapse.png"
                         class="panel-icon icon-op"
                         alt="Collapse panel icon"
                         id="collapse-icon-id"
                         (click)="toggleCollapseExpand()" />
                </span>
            </span>
            <ng-template #collapsePanel>
                <span class="govuk-!-margin-bottom-3 vh-collapse">
                    <img src="/assets/images/expand.png"
                         class="panel-icon icon-op"
                         alt="Expand panel icon"
                         id="expand-icon-id"
                         (click)="toggleCollapseExpand()" />
                </span>
            </ng-template>
        </div>
    </div>

    <div class="govuk-table table-br panel-container-list" summary="Judge hearing participants panel">

        <div class="govuk-grid-row vh-line row-pad tooltip" *ngFor="let participant of participants; let i = index">
            <div *ngIf="!expandPanel && !cursorOnIconMute && !cursorOnIconUnmute  && !cursorOnIconHand">
                <span class="top top-name govuk-body-s--white tooltip-collapse-name">
                    {{ participant.displayName }}
                </span>
            </div>


            <div *ngIf="cursorOnIconMute"
                 class="top top-name-icon govuk-body-s--white"
                 [ngClass]="expandPanel ? 'tooltip-expand-mute' : 'tooltip-collapse-mute'">
                <span *ngIf="expandPanel; else collapsePanelMute">
                    Unmute
                </span>
                <ng-template #collapsePanelMute>
                    Unmute {{ participant.displayName }}
                </ng-template>
            </div>

            <div *ngIf="cursorOnIconUnmute"
                 class="top top-name-icon govuk-body-s--white"
                 [ngClass]="expandPanel ? 'tooltip-expand-mute' : 'tooltip-collapse-mute'">
                <span *ngIf="expandPanel; else collapsePanelUnmute">
                    Mute
                </span>
                <ng-template #collapsePanelUnmute>
                    Mute {{ participant.displayName }}
                </ng-template>
            </div>




            <div *ngIf="isParticipantInHearing(participant)">


                <div class="govuk-table_cell govuk-body-s--white vh-name" *ngIf="expandPanel">
                    {{ participant.displayName }}
                </div>

                <div class="govuk-table_cell cell-icon" *ngIf="participant.isMuted; else participantUnmuted">

                    <img src="/assets/images/mute-mic-red.png"
                         class="panel-icon"
                         alt="Microphone muted icon"
                         (click)="toggleMuteParticipant(participant)"
                         (mouseover)="cursorOnIconMute = true"
                         (mouseout)="cursorOnIconMute = false" />
                </div>

                <ng-template #participantUnmuted>
                    <div class="govuk-table_cell cell-icon">

                        <img src="/assets/images/mic.png"
                             class="panel-icon"
                             alt="Microphone on icon"
                             (click)="toggleMuteParticipant(participant)"
                             (mouseover)="cursorOnIconUnmute = true"
                             (mouseout)="cursorOnIconUnmute = false" />
                    </div>
                </ng-template>

                <div class="govuk-table_cell cell-icon" style="margin-left:15px;" *ngIf="participant.handRaised">

                    <img src="/assets/images/hand-yellow.png"
                         class="panel-icon"
                         alt="Hand on icon"
                         (click)="lowerParticipantHand(participant.participantId)"
                         (mouseover)="cursorOnIconHand = true"
                         (mouseout)="cursorOnIconHand = false" />
                </div>
                <div *ngIf="cursorOnIconHand"
                     class="top top-name-icon govuk-body-s--white"
                     [ngClass]="expandPanel ? 'tooltip-expand-hand' : 'tooltip-collapse-hand'">
                    <span *ngIf="expandPanel; else collapsePanelHand">
                        Lower hand
                    </span>
                    <ng-template #collapsePanelHand>
                        Lower hand {{participant.displayName}}
                    </ng-template>
                </div>


            </div>
        </div>
    </div>



    <div class="govuk-grid-row govuk-!-margin-bottom-1">

        <div class="govuk-grid-column-full govuk-!-margin-top-2 govuk-!-margin-bottom-3" *ngIf="expandPanel; else buttonsCollapse">
            <button data-prevent-double-click="true"
                    class="govuk-button grey-btn vh-mr"
                    [ngClass]="{ muted: isMuteAll }"
                    (click)="toggleMuteAll()">
                {{ muteAllToggleText }}
            </button>
            <button class="govuk-button grey-btn" (click)="lowerAllHands()">Lower all hands</button>
        </div>

        <ng-template #buttonsCollapse>
            <div class="govuk-grid-column-full govuk-!-margin-top-2 govuk-!-margin-bottom-3 tooltip" style=" display:inline-block;">

                <img [src]="isMuteAll ? '/assets/images/mute-mic-red.png' : '/assets/images/mic.png'"
                     class="panel-icon"
                     [alt]="isMuteAll ? 'Microphone muted icon' : 'Microphone on icon'"
                     (click)="toggleMuteAll()"
                     (mouseover)="cursorOnMuteAll = true"
                     (mouseout)="cursorOnMuteAll = false" />
                <span *ngIf="cursorOnMuteAll" class="top top-btn govuk-body govuk-body--white tooltip-collapse-btn">
                    {{ muteAllToggleText }} participants
                </span>


                <img src="/assets/images/no-hand.png"
                     class="panel-icon" style="margin-left:10px;"
                     alt="Lower all hand icon"
                     (click)="lowerAllHands()"
                     (mouseover)="cursorOnLowerHandAll = true"
                     (mouseout)="cursorOnLowerHandAll = false" />
                <span *ngIf="cursorOnLowerHandAll" class="top top-btn govuk-body govuk-body--white tooltip-collapse-btn">
                    Lower all hands
                </span>


            </div>
        </ng-template>
    </div>

</div>
