<div *ngIf="loadingData">
  <p class="govuk-body">Loading please wait...</p>
</div>

<div *ngIf="showVideo()" class="govuk-grid-row">
  <div class="govuk-grid-column-one-half">
    <video id="incomingFeed" [srcObject]="this.stream" autoplay width="1000px" height="auto">
      Your browser does not support Video
    </video>
  </div>
</div>

<div *ngIf="!loadingData && hearing" class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <h1 class="govuk-heading-xl">Your hearing {{ getConferenceStatusText() }}</h1>

    <h2 class="govuk-heading-m">{{hearing.getConference().case_name}}</h2>

    <h3 class="govuk-heading-m">Case number: {{hearing.getConference().case_number}}</h3>

    <div class="govuk-!-margin-bottom-9">
      <span class="govuk-body">
        <p class="govuk-!-margin-0" aria-label="date of hearing, scheduled start time and scheduled end time">
          {{ hearing.getScheduledStartTime() | date: 'EEEE dd MMMM	yyyy' }},
          <span class="govuk-!-font-weight-bold">{{ hearing.getScheduledStartTime() | date: 'HH:mm a' }} to
            {{ hearing.getScheduledEndTime() | date: 'HH:mm a' }}</span>
        </p>
      </span>
    </div>

    <div *ngIf="hearing.isClosed()">
      <p class="govuk-body">
        This hearing is finished. You may now sign out.
      </p>
    </div>

    <div *ngIf="hearing.isPaused()">
      <p class="govuk-body">
        Please wait here. The judge will resume the hearing shortly.
      </p>
    </div>

    <div *ngIf="hearing.isSuspended()" class="govuk-warning-text govuk-!-padding-right-6">
      <span class="govuk-warning-text__icon" style="top:20px" aria-hidden="true">!</span>
      <strong class="govuk-warning-text__text">
        <span class="govuk-warning-text__assistive">Warning</span>
        <p>We are experiencing some technical difficulties.</p>
        <p>
          Please wait here, the judge will resume the hearing as soon
          as these issues have been resolved.
        </p>
      </strong>
    </div>

    <div *ngIf="*!showVideo() && currentTime && hearing.isNotStarted()" class="govuk-panel"
      [ngClass]="{'hearing-on-time': hearing.isOnTime(), 'hearing-near-start': hearing.isStarting(), 'hearing-delayed': hearing.isDelayed()}">
      <div class="govuk-body govuk-!-margin-bottom-0"
        [ngClass]="{'hearing-on-time': hearing.isOnTime(), 'hearing-near-start': hearing.isStarting(), 'hearing-delayed': hearing.isDelayed()}">
        <span *ngIf="hearing.isOnTime() || hearing.isStarting()">
          <strong>Please keep an eye on the time</strong> so you're ready when the judge starts the hearing
        </span>
        <span *ngIf="hearing.isDelayed()">
          <strong>We're really sorry your hearing is delayed.</strong> Please stand by and one of the video hearing team
          will call you in the next 5 minutes on the number you have given us.
        </span>
      </div>
      <div class="govuk-grid-row">
        <div class="govuk-grid-column-one-half">
          <div class="govuk-panel__body govuk-!-margin-top-4">
            <app-analogue-clock [hearing]="hearing"></app-analogue-clock>
          </div>
        </div>
        <div class="govuk-grid-column-one-half">
          <div class="govuk-body"
            [ngClass]="{'hearing-on-time': hearing.isOnTime(), 'hearing-near-start': hearing.isStarting(), 'hearing-delayed': hearing.isDelayed()}">
            <p class="govuk-!-margin-bottom-4">The time now is:</p>
            <p class="govuk-panel__body govuk-!-margin-top-4 govuk-!-font-size-80">
              <strong>{{ currentTime | date:'HH:mm' }}</strong></p>
          </div>
        </div>
      </div>
    </div>

    <div class="govuk-!-margin-top-9">
      <p class="govuk-body"><strong>Dedicated helpline: 0300 303 0655</strong></p>
    </div>
  </div>

  <div class="govuk-grid-column-one-third">
    <app-participant-status-list aria-label="list of participants in hearing" [conference]="hearing.getConference()">
    </app-participant-status-list>
  </div>
</div>
