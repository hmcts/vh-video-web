<div *ngIf="loadingData">
  <p class="govuk-body">Loading please wait...</p>
</div>

<div *ngIf="showVideo()" class="govuk-grid-row">
  <div class="govuk-grid-column-one-half">
    <video id="incomingFeed" [srcObject]="this.stream" autoplay width="1000px" height="auto">
      Your browser does not support Video
    </video>
  </div>
</div>

<div *ngIf="!loadingData && conference && statusUpdated" class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <h1 class="govuk-heading-xl">Your hearing {{ getConferenceStatusText() }}</h1>

    <h2 class="govuk-heading-m">{{conference.case_name}}</h2>

    <h3 class="govuk-heading-m">Case number: {{conference.case_number}}</h3>

    <div class="govuk-!-margin-bottom-9">
      <span class="govuk-body">
        <p class="govuk-!-margin-0" aria-label="date of hearing, scheduled start time and scheduled end time">
          {{ conference.scheduled_date_time | date: 'EEEE dd MMMM	yyyy' }},
          <span class="govuk-!-font-weight-bold">{{ conference.scheduled_date_time | date: 'H:m a' }} to
            {{ getScheduledEndTime() | date: 'H:m a' }}</span>
        </p>
      </span>
    </div>

    <div *ngIf="isClosed()">
      <p class="govuk-body">
        This hearing is finished. You may now sign out.
      </p>
    </div>

    <div *ngIf="isPaused()">
      <p class="govuk-body">
        Please wait here. The judge will resume the hearing shortly.
      </p>
    </div>

    <div *ngIf="isSuspended()" class="govuk-warning-text govuk-!-padding-right-6">
      <span class="govuk-warning-text__icon" style="top:20px" aria-hidden="true">!</span>
      <strong class="govuk-warning-text__text">
        <span class="govuk-warning-text__assistive">Warning</span>
        <p>We are experiencing some technical difficulties.</p>
        <p>
          Please wait here, the judge will resume the hearing as soon
          as these issues have been resolved.
        </p>
      </strong>
    </div>

    <div *ngIf="currentTime" class="govuk-panel"
      [ngClass]="{'hearing-on-time': isOnTime(), 'hearing-near-start': isStarting(), 'hearing-delayed': isDelayed()}">
      <div class="govuk-body govuk-!-margin-bottom-0"
        [ngClass]="{'hearing-on-time': isOnTime(), 'hearing-near-start': isStarting(), 'hearing-delayed': isDelayed()}">
        <span *ngIf="isOnTime() || isStarting()">
          <strong>Please keep an eye on the time</strong> so you're ready when the judge starts the hearing
        </span>
        <span *ngIf="isDelayed()">
          <strong>We're really sorry your hearing is delayed.</strong> Please stand by and one of the video hearing team
          will call you in the next 5 minutes on the number you have given us.
        </span>
      </div>
      <div class="govuk-grid-row">
        <div class="govuk-grid-column-one-half">
          <div class="govuk-panel__body">
            Analogue Clock Goes Here
          </div>
        </div>
        <div class="govuk-grid-column-one-half">
          <div class="govuk-body"
            [ngClass]="{'hearing-on-time': isOnTime(), 'hearing-near-start': isStarting(), 'hearing-delayed': isDelayed()}">
            <p class="govuk-!-margin-bottom-0">The time now is:</p>
            <p class="govuk-panel__body govuk-!-margin-top-0"><strong>{{ currentTime | date:'HH:mm' }}</strong></p>
          </div>
        </div>
      </div>
    </div>

    <div class="govuk-!-margin-top-9">
      <p class="govuk-body"><strong>Dedicated helpline: 0300 303 0655</strong></p>
    </div>
  </div>

  <div class="govuk-grid-column-one-third">
    <app-participant-status-list aria-label="list of participants in hearing" [conference]="conference">
    </app-participant-status-list>
  </div>
</div>
